<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Language Test | æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400&family=Noto+Serif+JP:wght@400;700&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #C41E3A;
            --secondary: #264653;
            --accent: #D4A843;
            --bg: #F5F0E8;
            --text: #2C2C2C;
            --shadow: rgba(0,0,0,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Serif', 'Noto Serif JP', 'Noto Serif SC', serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        .test-header {
            background: linear-gradient(135deg, var(--secondary) 0%, #1a3040 100%);
            color: #fff;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }
        .test-header h1 { font-size: 1.3rem; }
        .header-right { display: flex; align-items: center; gap: 15px; }
        .test-header a { color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .test-header a:hover { text-decoration: underline; }
        .lang-switch { display: flex; gap: 4px; }
        .lang-switch button {
            background: rgba(255,255,255,0.15);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 5px 10px;
            font-size: 0.8rem;
            font-family: inherit;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .lang-switch button:hover { background: rgba(255,255,255,0.25); }
        .lang-switch button.active { background: var(--accent); border-color: var(--accent); color: #fff; font-weight: bold; }
        .test-container { max-width: 800px; margin: 40px auto; padding: 0 20px; }
        .selection-screen { text-align: center; }
        .selection-screen h2 { font-size: 1.8rem; color: var(--secondary); margin-bottom: 10px; }
        .selection-screen p { color: #666; margin-bottom: 30px; font-size: 1rem; }
        .section-label { color: var(--secondary); margin-bottom: 15px; font-size: 1.1rem; }
        .level-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .level-card {
            background: #fff; border-radius: 12px; padding: 30px 20px; cursor: pointer;
            transition: all 0.3s; box-shadow: 0 3px 15px var(--shadow); border: 3px solid transparent;
        }
        .level-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .level-card.selected { border-color: var(--primary); }
        .level-card .level-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .level-card h3 { font-size: 1.1rem; color: var(--secondary); margin-bottom: 5px; }
        .level-card .level-jp { font-size: 1.5rem; color: var(--primary); margin-bottom: 8px; }
        .level-card p { font-size: 0.82rem; color: #888; }
        .type-cards { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px; }
        .type-card {
            background: #fff; border-radius: 12px; padding: 30px; cursor: pointer;
            transition: all 0.3s; box-shadow: 0 3px 15px var(--shadow); border: 3px solid transparent;
        }
        .type-card:hover { transform: translateY(-3px); }
        .type-card.selected { border-color: var(--accent); }
        .type-card .type-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .type-card h3 { font-size: 1.1rem; color: var(--secondary); margin-bottom: 5px; }
        .type-card p { font-size: 0.82rem; color: #888; }
        .start-btn {
            background: var(--primary); color: #fff; border: none; padding: 15px 50px;
            font-size: 1.1rem; font-family: inherit; border-radius: 8px; cursor: pointer;
            transition: all 0.3s; margin-top: 10px;
        }
        .start-btn:hover { background: #a0182f; transform: scale(1.03); }
        .start-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
        .quiz-screen { display: none; }
        .quiz-progress { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .progress-bar-bg { flex: 1; height: 10px; background: #ddd; border-radius: 5px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); border-radius: 5px; transition: width 0.4s; }
        .progress-text { font-size: 0.9rem; color: #888; white-space: nowrap; }
        .question-card { background: #fff; border-radius: 12px; padding: 35px; box-shadow: 0 3px 15px var(--shadow); margin-bottom: 20px; }
        .question-type-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; margin-bottom: 15px; color: #fff; }
        .badge-writing { background: var(--secondary); }
        .badge-listening { background: var(--primary); }
        .question-text { font-size: 1.2rem; color: var(--secondary); margin-bottom: 8px; }
        .question-jp { font-size: 2rem; color: var(--primary); margin-bottom: 20px; line-height: 1.4; }
        .question-hint { font-size: 0.85rem; color: #999; margin-bottom: 15px; font-style: italic; }
        .listen-btn {
            display: inline-flex; align-items: center; gap: 8px; background: var(--primary); color: #fff;
            border: none; padding: 12px 25px; font-size: 1rem; font-family: inherit; border-radius: 8px;
            cursor: pointer; transition: all 0.3s; margin-bottom: 20px;
        }
        .listen-btn:hover { background: #a0182f; }
        .choices { display: grid; gap: 12px; }
        .choice-btn {
            background: #fff; border: 2px solid #e0d8cc; border-radius: 8px; padding: 14px 20px;
            font-size: 1rem; font-family: inherit; cursor: pointer; transition: all 0.2s; text-align: left;
        }
        .choice-btn:hover { border-color: var(--accent); background: #faf6ef; }
        .choice-btn.correct { border-color: #2ecc71; background: #eafaf1; color: #27ae60; }
        .choice-btn.wrong { border-color: #e74c3c; background: #fdecea; color: #c0392b; }
        .choice-btn:disabled { cursor: default; }
        .feedback { margin-top: 15px; padding: 12px 18px; border-radius: 8px; font-size: 0.95rem; display: none; }
        .feedback.correct { display: block; background: #eafaf1; color: #27ae60; border: 1px solid #2ecc71; }
        .feedback.wrong { display: block; background: #fdecea; color: #c0392b; border: 1px solid #e74c3c; }
        .next-btn {
            display: none; margin-top: 20px; background: var(--accent); color: #fff; border: none;
            padding: 12px 35px; font-size: 1rem; font-family: inherit; border-radius: 8px; cursor: pointer;
        }
        .next-btn:hover { background: #b8912e; }
        .results-screen { display: none; text-align: center; }
        .results-card { background: #fff; border-radius: 16px; padding: 50px 40px; box-shadow: 0 5px 25px var(--shadow); }
        .results-icon { font-size: 4rem; margin-bottom: 15px; }
        .results-card h2 { font-size: 1.8rem; color: var(--secondary); margin-bottom: 10px; }
        .results-score { font-size: 3.5rem; font-weight: bold; color: var(--primary); margin: 15px 0; }
        .results-detail { font-size: 1rem; color: #888; margin-bottom: 25px; }
        .results-message { font-size: 1.05rem; color: var(--text); margin-bottom: 30px; padding: 15px; background: var(--bg); border-radius: 8px; }
        .results-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .results-buttons button { padding: 12px 30px; font-size: 1rem; font-family: inherit; border-radius: 8px; cursor: pointer; border: none; transition: all 0.3s; }
        .retry-btn { background: var(--primary); color: #fff; }
        .retry-btn:hover { background: #a0182f; }
        .back-btn { background: var(--secondary); color: #fff; }
        .back-btn:hover { background: #1a3040; }
        @media (max-width: 768px) {
            .level-cards { grid-template-columns: 1fr; gap: 12px; }
            .type-cards { grid-template-columns: 1fr; gap: 12px; }
            .question-jp { font-size: 1.5rem; }
            .test-header { flex-direction: column; align-items: flex-start; padding: 15px 20px; }
            .test-header h1 { font-size: 1.1rem; }
            .header-right { width: 100%; justify-content: space-between; }
            .test-container { margin: 25px auto; padding: 0 15px; }
            .selection-screen h2 { font-size: 1.4rem; }
            .selection-screen p { font-size: 0.9rem; margin-bottom: 20px; }
            .level-card { padding: 20px 15px; }
            .level-card .level-icon { font-size: 2rem; }
            .level-card .level-jp { font-size: 1.2rem; }
            .type-card { padding: 20px; }
            .type-card .type-icon { font-size: 2rem; }
            .question-card { padding: 22px; }
            .results-card { padding: 30px 20px; }
            .results-score { font-size: 2.8rem; }
            .results-card h2 { font-size: 1.4rem; }
            .start-btn { padding: 13px 35px; font-size: 1rem; width: 100%; }
            .results-buttons { flex-direction: column; align-items: stretch; }
            .results-buttons button { width: 100%; }
            .next-btn { width: 100%; text-align: center; }
            .listen-btn { width: 100%; justify-content: center; }
        }
        @media (max-width: 400px) {
            .test-header h1 { font-size: 0.95rem; }
            .lang-switch button { padding: 4px 7px; font-size: 0.72rem; }
            .test-header a { font-size: 0.8rem; }
            .question-text { font-size: 1rem; }
            .question-jp { font-size: 1.3rem; }
            .choice-btn { padding: 12px 14px; font-size: 0.92rem; }
            .selection-screen h2 { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

<div class="test-header">
    <h1 id="pageTitle">æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ | Japanese Language Test</h1>
    <div class="header-right">
        <div class="lang-switch">
            <button onclick="setLang('en')" id="langEn" class="active">EN</button>
            <button onclick="setLang('zh')" id="langZh">ä¸­æ–‡</button>
            <button onclick="setLang('ja')" id="langJa">æ—¥æœ¬èª</button>
            <button onclick="setLang('es')" id="langEs">ES</button>
        </div>
        <a href="index.html#japanese" id="backLink">â† Back</a>
    </div>
</div>

<div class="test-container">
    <!-- Selection Screen -->
    <div class="selection-screen" id="selectionScreen">
        <h2 id="mainTitle"></h2>
        <p id="mainSub"></p>
        <h3 class="section-label" id="levelLabel"></h3>
        <div class="level-cards">
            <div class="level-card" onclick="selectLevel('beginner')">
                <div class="level-icon">ğŸŒ¸</div>
                <div class="level-jp">åˆç´š</div>
                <h3 id="beginnerLabel">Beginner</h3>
                <p id="beginnerDesc"></p>
            </div>
            <div class="level-card" onclick="selectLevel('intermediate')">
                <div class="level-icon">ğŸ‹</div>
                <div class="level-jp">ä¸­ç´š</div>
                <h3 id="intermediateLabel">Intermediate</h3>
                <p id="intermediateDesc"></p>
            </div>
            <div class="level-card" onclick="selectLevel('advanced')">
                <div class="level-icon">ğŸ¯</div>
                <div class="level-jp">ä¸Šç´š</div>
                <h3 id="advancedLabel">Advanced</h3>
                <p id="advancedDesc"></p>
            </div>
        </div>
        <h3 class="section-label" id="typeLabel"></h3>
        <div class="type-cards">
            <div class="type-card" onclick="selectType('writing')">
                <div class="type-icon">âœï¸</div>
                <h3 id="writingLabel">Writing</h3>
                <p id="writingDesc"></p>
            </div>
            <div class="type-card" onclick="selectType('listening')">
                <div class="type-icon">ğŸ§</div>
                <h3 id="listeningLabel">Listening</h3>
                <p id="listeningDesc"></p>
            </div>
        </div>
        <button class="start-btn" id="startBtn" disabled onclick="startQuiz()"></button>
    </div>

    <!-- Quiz Screen -->
    <div class="quiz-screen" id="quizScreen">
        <div class="quiz-progress">
            <div class="progress-bar-bg"><div class="progress-bar-fill" id="progressBar"></div></div>
            <div class="progress-text" id="progressText"></div>
        </div>
        <div id="questionArea"></div>
        <button class="next-btn" id="nextBtn" onclick="nextQuestion()"></button>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
        <div class="results-card">
            <div class="results-icon" id="resultsIcon"></div>
            <h2 id="resultsTitle"></h2>
            <div class="results-score" id="resultsScore"></div>
            <div class="results-detail" id="resultsDetail"></div>
            <div class="results-message" id="resultsMessage"></div>
            <div class="results-buttons">
                <button class="retry-btn" id="retryBtn" onclick="retryQuiz()"></button>
                <button class="back-btn" id="changeLevelBtn" onclick="backToSelect()"></button>
            </div>
        </div>
    </div>
</div>

<script>
// ===== UI Translations =====
const UI = {
    en: {
        pageTitle: "Japanese Language Test",
        backLink: "â† Back to Club Site",
        mainTitle: "Test your Japanese!",
        mainSub: "Choose a level and test type to begin",
        levelLabel: "Level",
        typeLabel: "Test Type",
        beginnerLabel: "Beginner", beginnerDesc: "Hiragana, basic greetings, simple words",
        intermediateLabel: "Intermediate", intermediateDesc: "Katakana, daily phrases, basic kanji",
        advancedLabel: "Advanced", advancedDesc: "Kanji, grammar, complex expressions",
        writingLabel: "Writing", writingDesc: "Reading comprehension, vocabulary, translation",
        listeningLabel: "Listening", listeningDesc: "Listen and choose the correct answer",
        startBtn: "Start Test",
        playBtn: "ğŸ”Š Play Audio",
        listenHint: "Click the button to listen, then choose your answer",
        correctFeedback: "âœ“ Correct!",
        wrongFeedback: "âœ— Incorrect. The answer was: ",
        nextBtn: "Next â†’",
        seeResults: "See Results â†’",
        resultsTitle: "Results",
        retryBtn: "Retry",
        changeLevelBtn: "Change Level",
        excellent: "Excellent! You have mastered this level!",
        great: "Great job! Keep up the good work!",
        notBad: "Not bad, but there is room to improve!",
        keepGoing: "Keep practicing and you will get better!",
        correct: " correct",
    },
    zh: {
        pageTitle: "æ—¥è¯­æ°´å¹³æµ‹è¯•",
        backLink: "â† è¿”å›ç¤¾å›¢ç½‘ç«™",
        mainTitle: "æµ‹è¯•ä½ çš„æ—¥è¯­æ°´å¹³ï¼",
        mainSub: "é€‰æ‹©ç­‰çº§å’Œæµ‹è¯•ç±»å‹å¼€å§‹",
        levelLabel: "ç­‰çº§",
        typeLabel: "æµ‹è¯•ç±»å‹",
        beginnerLabel: "åˆçº§", beginnerDesc: "å¹³å‡åã€åŸºæœ¬é—®å€™ã€ç®€å•è¯æ±‡",
        intermediateLabel: "ä¸­çº§", intermediateDesc: "ç‰‡å‡åã€æ—¥å¸¸ç”¨è¯­ã€åŸºç¡€æ±‰å­—",
        advancedLabel: "é«˜çº§", advancedDesc: "æ±‰å­—ã€è¯­æ³•ã€å¤æ‚è¡¨è¾¾",
        writingLabel: "è¯»å†™", writingDesc: "é˜…è¯»ç†è§£ã€è¯æ±‡ã€ç¿»è¯‘",
        listeningLabel: "å¬åŠ›", listeningDesc: "å¬éŸ³é¢‘é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ",
        startBtn: "å¼€å§‹æµ‹è¯•",
        playBtn: "ğŸ”Š æ’­æ”¾éŸ³é¢‘",
        listenHint: "ç‚¹å‡»æŒ‰é’®å¬éŸ³é¢‘ï¼Œç„¶åé€‰æ‹©ç­”æ¡ˆ",
        correctFeedback: "âœ“ æ­£ç¡®ï¼",
        wrongFeedback: "âœ— é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š",
        nextBtn: "ä¸‹ä¸€é¢˜ â†’",
        seeResults: "æŸ¥çœ‹ç»“æœ â†’",
        resultsTitle: "æµ‹è¯•ç»“æœ",
        retryBtn: "å†è¯•ä¸€æ¬¡",
        changeLevelBtn: "æ›´æ¢ç­‰çº§",
        excellent: "å¤ªæ£’äº†ï¼ä½ å·²ç»æŒæ¡äº†è¿™ä¸ªç­‰çº§ï¼",
        great: "åšå¾—å¾ˆå¥½ï¼ç»§ç»­ä¿æŒï¼",
        notBad: "è¿˜ä¸é”™ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ï¼",
        keepGoing: "ç»§ç»­ç»ƒä¹ ï¼Œä½ ä¼šè¶Šæ¥è¶Šå¥½çš„ï¼",
        correct: " é¢˜æ­£ç¡®",
    },
    ja: {
        pageTitle: "æ—¥æœ¬èªãƒ†ã‚¹ãƒˆ",
        backLink: "â† ã‚µã‚¤ãƒˆã«æˆ»ã‚‹",
        mainTitle: "æ—¥æœ¬èªåŠ›ã‚’ãƒ†ã‚¹ãƒˆã—ã‚ˆã†ï¼",
        mainSub: "ãƒ¬ãƒ™ãƒ«ã¨ãƒ†ã‚¹ãƒˆã®ç¨®é¡ã‚’é¸ã‚“ã§ãã ã•ã„",
        levelLabel: "ãƒ¬ãƒ™ãƒ«",
        typeLabel: "ãƒ†ã‚¹ãƒˆã®ç¨®é¡",
        beginnerLabel: "åˆç´š", beginnerDesc: "ã²ã‚‰ãŒãªã€åŸºæœ¬ã®æŒ¨æ‹¶ã€ç°¡å˜ãªå˜èª",
        intermediateLabel: "ä¸­ç´š", intermediateDesc: "ã‚«ã‚¿ã‚«ãƒŠã€æ—¥å¸¸ãƒ•ãƒ¬ãƒ¼ã‚ºã€åŸºæœ¬æ¼¢å­—",
        advancedLabel: "ä¸Šç´š", advancedDesc: "æ¼¢å­—ã€æ–‡æ³•ã€è¤‡é›‘ãªè¡¨ç¾",
        writingLabel: "ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°", writingDesc: "èª­è§£ã€èªå½™ã€ç¿»è¨³",
        listeningLabel: "ãƒªã‚¹ãƒ‹ãƒ³ã‚°", listeningDesc: "éŸ³å£°ã‚’èã„ã¦æ­£ã—ã„ç­”ãˆã‚’é¸ã¶",
        startBtn: "ãƒ†ã‚¹ãƒˆé–‹å§‹",
        playBtn: "ğŸ”Š å†ç”Ÿ",
        listenHint: "ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦éŸ³å£°ã‚’èãã€ç­”ãˆã‚’é¸ã‚“ã§ãã ã•ã„",
        correctFeedback: "âœ“ æ­£è§£ï¼",
        wrongFeedback: "âœ— ä¸æ­£è§£ã€‚æ­£è§£ã¯ï¼š",
        nextBtn: "æ¬¡ã¸ â†’",
        seeResults: "çµæœã‚’è¦‹ã‚‹ â†’",
        resultsTitle: "ãƒ†ã‚¹ãƒˆçµæœ",
        retryBtn: "ã‚‚ã†ä¸€åº¦",
        changeLevelBtn: "ãƒ¬ãƒ™ãƒ«å¤‰æ›´",
        excellent: "ç´ æ™´ã‚‰ã—ã„ï¼ã“ã®ãƒ¬ãƒ™ãƒ«ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸï¼",
        great: "ã‚ˆãã§ãã¾ã—ãŸï¼ã“ã®èª¿å­ã§é ‘å¼µã£ã¦ï¼",
        notBad: "æ‚ªããªã„ã§ã™ãŒã€ã¾ã æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ï¼",
        keepGoing: "ã‚‚ã£ã¨ç·´ç¿’ã—ã¦ä¸Šé”ã—ã¾ã—ã‚‡ã†ï¼",
        correct: " å•æ­£è§£",
    },
    es: {
        pageTitle: "Prueba de JaponÃ©s",
        backLink: "â† Volver al sitio",
        mainTitle: "Â¡Pon a prueba tu japonÃ©s!",
        mainSub: "Elige un nivel y tipo de prueba para comenzar",
        levelLabel: "Nivel",
        typeLabel: "Tipo de prueba",
        beginnerLabel: "Principiante", beginnerDesc: "Hiragana, saludos bÃ¡sicos, palabras simples",
        intermediateLabel: "Intermedio", intermediateDesc: "Katakana, frases diarias, kanji bÃ¡sico",
        advancedLabel: "Avanzado", advancedDesc: "Kanji, gramÃ¡tica, expresiones complejas",
        writingLabel: "Escritura", writingDesc: "ComprensiÃ³n lectora, vocabulario, traducciÃ³n",
        listeningLabel: "ComprensiÃ³n auditiva", listeningDesc: "Escucha y elige la respuesta correcta",
        startBtn: "Iniciar prueba",
        playBtn: "ğŸ”Š Reproducir",
        listenHint: "Haz clic en el botÃ³n para escuchar, luego elige tu respuesta",
        correctFeedback: "âœ“ Â¡Correcto!",
        wrongFeedback: "âœ— Incorrecto. La respuesta era: ",
        nextBtn: "Siguiente â†’",
        seeResults: "Ver resultados â†’",
        resultsTitle: "Resultados",
        retryBtn: "Reintentar",
        changeLevelBtn: "Cambiar nivel",
        excellent: "Â¡Excelente! Â¡Has dominado este nivel!",
        great: "Â¡Buen trabajo! Â¡Sigue asÃ­!",
        notBad: "Â¡No estÃ¡ mal, pero hay margen de mejora!",
        keepGoing: "Â¡Sigue practicando y mejorarÃ¡s!",
        correct: " correctas",
    }
};

// ===== Question Banks (multilingual choices) =====
// Each choice is {en, zh, ja, es} or a string (Japanese text shown as-is)
const Q = {
beginner: {
  writing: [
    { q: {en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™",
      choices:[{en:"Good morning",zh:"æ—©ä¸Šå¥½",ja:"ãŠã¯ã‚ˆã†ï¼ˆæŒ¨æ‹¶ï¼‰",es:"Buenos dÃ­as"},{en:"Good evening",zh:"æ™šä¸Šå¥½",ja:"ã“ã‚“ã°ã‚“ã¯ï¼ˆæŒ¨æ‹¶ï¼‰",es:"Buenas noches"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"},{en:"Thank you",zh:"è°¢è°¢",ja:"ã‚ã‚ŠãŒã¨ã†",es:"Gracias"}], answer:0 },
    { q: {en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"ã‚ã‚ŠãŒã¨ã†",
      choices:[{en:"Sorry",zh:"å¯¹ä¸èµ·",ja:"ã”ã‚ã‚“ãªã•ã„",es:"Lo siento"},{en:"Hello",zh:"ä½ å¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola"},{en:"Thank you",zh:"è°¢è°¢",ja:"ã‚ã‚ŠãŒã¨ã†",es:"Gracias"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"}], answer:2 },
    { q: {en:"Choose the correct hiragana for 'KA'",zh:"é€‰æ‹©'KA'çš„æ­£ç¡®å¹³å‡å",ja:"'KA'ã®æ­£ã—ã„ã²ã‚‰ãŒãªã¯ï¼Ÿ",es:"Elige el hiragana correcto para 'KA'"}, jp:"KA",
      choices:[{en:"ã (ki)",zh:"ã (ki)",ja:"ã",es:"ã (ki)"},{en:"ã‹ (ka)",zh:"ã‹ (ka)",ja:"ã‹",es:"ã‹ (ka)"},{en:"ã (ku)",zh:"ã (ku)",ja:"ã",es:"ã (ku)"},{en:"ã‘ (ke)",zh:"ã‘ (ke)",ja:"ã‘",es:"ã‘ (ke)"}], answer:1 },
    { q: {en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"ã™ã¿ã¾ã›ã‚“",
      choices:[{en:"Thank you",zh:"è°¢è°¢",ja:"ã‚ã‚ŠãŒã¨ã†",es:"Gracias"},{en:"Excuse me / Sorry",zh:"ä¸å¥½æ„æ€ / å¯¹ä¸èµ·",ja:"ã™ã¿ã¾ã›ã‚“ / ã”ã‚ã‚“ãªã•ã„",es:"Disculpe / PerdÃ³n"},{en:"Nice to meet you",zh:"åˆæ¬¡è§é¢",ja:"ã¯ã˜ã‚ã¾ã—ã¦",es:"Mucho gusto"},{en:"Good night",zh:"æ™šå®‰",ja:"ãŠã‚„ã™ã¿",es:"Buenas noches"}], answer:1 },
    { q: {en:"What does çŒ« (neko) mean?",zh:"çŒ« (neko) æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"çŒ«ã®è‹±èªã¯ï¼Ÿ",es:"Â¿QuÃ© significa çŒ« (neko)?"}, jp:"çŒ«",
      choices:[{en:"Dog",zh:"ç‹—",ja:"çŠ¬",es:"Perro"},{en:"Bird",zh:"é¸Ÿ",ja:"é³¥",es:"PÃ¡jaro"},{en:"Cat",zh:"çŒ«",ja:"çŒ«",es:"Gato"},{en:"Fish",zh:"é±¼",ja:"é­š",es:"Pez"}], answer:2 },
    { q: {en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"ã•ã‚ˆã†ãªã‚‰",
      choices:[{en:"Hello",zh:"ä½ å¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola"},{en:"See you",zh:"å›å¤´è§",ja:"ã¾ãŸä¼šãŠã†",es:"Nos vemos"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"},{en:"Good morning",zh:"æ—©ä¸Šå¥½",ja:"ãŠã¯ã‚ˆã†",es:"Buenos dÃ­as"}], answer:2 },
    { q: {en:"Choose the correct hiragana for 'SA'",zh:"é€‰æ‹©'SA'çš„æ­£ç¡®å¹³å‡å",ja:"'SA'ã®æ­£ã—ã„ã²ã‚‰ãŒãªã¯ï¼Ÿ",es:"Elige el hiragana correcto para 'SA'"}, jp:"SA",
      choices:[{en:"ã— (shi)",zh:"ã— (shi)",ja:"ã—",es:"ã— (shi)"},{en:"ã™ (su)",zh:"ã™ (su)",ja:"ã™",es:"ã™ (su)"},{en:"ã• (sa)",zh:"ã• (sa)",ja:"ã•",es:"ã• (sa)"},{en:"ã (so)",zh:"ã (so)",ja:"ã",es:"ã (so)"}], answer:2 },
    { q: {en:"What does ã¯ã„ mean?",zh:"ã¯ã„ æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã¯ã„ ã®è‹±èªã¯ï¼Ÿ",es:"Â¿QuÃ© significa ã¯ã„?"}, jp:"ã¯ã„",
      choices:[{en:"No",zh:"ä¸æ˜¯",ja:"ã„ã„ãˆ",es:"No"},{en:"Yes",zh:"æ˜¯çš„",ja:"ã¯ã„",es:"SÃ­"},{en:"Maybe",zh:"ä¹Ÿè®¸",ja:"ãŸã¶ã‚“",es:"QuizÃ¡s"},{en:"Hello",zh:"ä½ å¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola"}], answer:1 },
    { q: {en:"What does æ°´ (mizu) mean?",zh:"æ°´ (mizu) æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"æ°´ã®è‹±èªã¯ï¼Ÿ",es:"Â¿QuÃ© significa æ°´ (mizu)?"}, jp:"æ°´",
      choices:[{en:"Fire",zh:"ç«",ja:"ç«",es:"Fuego"},{en:"Water",zh:"æ°´",ja:"æ°´",es:"Agua"},{en:"Earth",zh:"åœŸ",ja:"åœŸ",es:"Tierra"},{en:"Wind",zh:"é£",ja:"é¢¨",es:"Viento"}], answer:1 },
    { q: {en:"How do you say 'Nice to meet you'?",zh:"'åˆæ¬¡è§é¢'ç”¨æ—¥è¯­æ€ä¹ˆè¯´ï¼Ÿ",ja:"'Nice to meet you' ã¯æ—¥æœ¬èªã§ï¼Ÿ",es:"Â¿CÃ³mo se dice 'Mucho gusto'?"}, jp:"? = Nice to meet you",
      choices:[{en:"ãŠã¯ã‚ˆã†",zh:"ãŠã¯ã‚ˆã†",ja:"ãŠã¯ã‚ˆã†",es:"ãŠã¯ã‚ˆã†"},{en:"ã•ã‚ˆã†ãªã‚‰",zh:"ã•ã‚ˆã†ãªã‚‰",ja:"ã•ã‚ˆã†ãªã‚‰",es:"ã•ã‚ˆã†ãªã‚‰"},{en:"ã¯ã˜ã‚ã¾ã—ã¦",zh:"ã¯ã˜ã‚ã¾ã—ã¦",ja:"ã¯ã˜ã‚ã¾ã—ã¦",es:"ã¯ã˜ã‚ã¾ã—ã¦"},{en:"ãŠã‚„ã™ã¿",zh:"ãŠã‚„ã™ã¿",ja:"ãŠã‚„ã™ã¿",es:"ãŠã‚„ã™ã¿"}], answer:2 },
  ],
  listening: [
    { text:"ã“ã‚“ã«ã¡ã¯", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Good morning",zh:"æ—©ä¸Šå¥½",ja:"ãŠã¯ã‚ˆã†",es:"Buenos dÃ­as"},{en:"Hello / Good afternoon",zh:"ä½ å¥½ / ä¸‹åˆå¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola / Buenas tardes"},{en:"Good evening",zh:"æ™šä¸Šå¥½",ja:"ã“ã‚“ã°ã‚“ã¯",es:"Buenas noches"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"}], answer:1 },
    { text:"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"I'm sorry",zh:"å¯¹ä¸èµ·",ja:"ã”ã‚ã‚“ãªã•ã„",es:"Lo siento"},{en:"Excuse me",zh:"ä¸å¥½æ„æ€",ja:"ã™ã¿ã¾ã›ã‚“",es:"Disculpe"},{en:"Thank you very much",zh:"éå¸¸æ„Ÿè°¢",ja:"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™",es:"Muchas gracias"},{en:"You're welcome",zh:"ä¸å®¢æ°”",ja:"ã©ã†ã„ãŸã—ã¾ã—ã¦",es:"De nada"}], answer:2 },
    { text:"ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Good evening",zh:"æ™šä¸Šå¥½",ja:"ã“ã‚“ã°ã‚“ã¯",es:"Buenas noches"},{en:"Good night",zh:"æ™šå®‰",ja:"ãŠã‚„ã™ã¿",es:"Buenas noches (dormir)"},{en:"Good morning",zh:"æ—©ä¸Šå¥½",ja:"ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™",es:"Buenos dÃ­as"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"}], answer:2 },
    { text:"ã•ã‚ˆã†ãªã‚‰", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Hello",zh:"ä½ å¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"},{en:"Sorry",zh:"å¯¹ä¸èµ·",ja:"ã”ã‚ã‚“ãªã•ã„",es:"PerdÃ³n"},{en:"Thank you",zh:"è°¢è°¢",ja:"ã‚ã‚ŠãŒã¨ã†",es:"Gracias"}], answer:1 },
    { text:"ã™ã¿ã¾ã›ã‚“", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Thank you",zh:"è°¢è°¢",ja:"ã‚ã‚ŠãŒã¨ã†",es:"Gracias"},{en:"Hello",zh:"ä½ å¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Hola"},{en:"Goodbye",zh:"å†è§",ja:"ã•ã‚ˆã†ãªã‚‰",es:"AdiÃ³s"},{en:"Excuse me",zh:"ä¸å¥½æ„æ€",ja:"ã™ã¿ã¾ã›ã‚“",es:"Disculpe"}], answer:3 },
    { text:"ãŠã‚„ã™ã¿ãªã•ã„", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Good morning",zh:"æ—©ä¸Šå¥½",ja:"ãŠã¯ã‚ˆã†",es:"Buenos dÃ­as"},{en:"Good afternoon",zh:"ä¸‹åˆå¥½",ja:"ã“ã‚“ã«ã¡ã¯",es:"Buenas tardes"},{en:"Good night",zh:"æ™šå®‰",ja:"ãŠã‚„ã™ã¿ãªã•ã„",es:"Buenas noches"},{en:"Good evening",zh:"æ™šä¸Šå¥½",ja:"ã“ã‚“ã°ã‚“ã¯",es:"Buenas noches"}], answer:2 },
    { text:"ã„ãŸã ãã¾ã™", q:{en:"What did you hear? (said before eating)",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿï¼ˆåƒé¥­å‰è¯´çš„è¯ï¼‰",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿï¼ˆé£Ÿäº‹å‰ã®æŒ¨æ‹¶ï¼‰",es:"Â¿QuÃ© escuchaste? (se dice antes de comer)"}, choices:[{en:"Thanks for the meal (after)",zh:"å¤šè°¢æ¬¾å¾…ï¼ˆé¥­åï¼‰",ja:"ã”ã¡ãã†ã•ã¾",es:"Gracias por la comida (despuÃ©s)"},{en:"Bon appÃ©tit / Let's eat",zh:"æˆ‘å¼€åŠ¨äº†",ja:"ã„ãŸã ãã¾ã™",es:"Buen provecho"},{en:"It's delicious",zh:"å¥½åƒ",ja:"ãŠã„ã—ã„",es:"EstÃ¡ delicioso"},{en:"I'm full",zh:"åƒé¥±äº†",ja:"ãŠè…¹ã„ã£ã±ã„",es:"Estoy lleno"}], answer:1 },
    { text:"ã¯ã˜ã‚ã¾ã—ã¦", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"See you later",zh:"å†è§",ja:"ã¾ãŸå¾Œã§",es:"Hasta luego"},{en:"Nice to meet you",zh:"åˆæ¬¡è§é¢",ja:"ã¯ã˜ã‚ã¾ã—ã¦",es:"Mucho gusto"},{en:"Long time no see",zh:"å¥½ä¹…ä¸è§",ja:"ãŠä¹…ã—ã¶ã‚Š",es:"CuÃ¡nto tiempo"},{en:"Take care",zh:"ä¿é‡",ja:"ãŠæ°—ã‚’ã¤ã‘ã¦",es:"CuÃ­date"}], answer:1 },
    { text:"ãŠã’ã‚“ãã§ã™ã‹", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"What is your name?",zh:"ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ",ja:"ãŠåå‰ã¯ï¼Ÿ",es:"Â¿CÃ³mo te llamas?"},{en:"Where are you from?",zh:"ä½ ä»å“ªé‡Œæ¥ï¼Ÿ",ja:"ã©ã¡ã‚‰ã‹ã‚‰ï¼Ÿ",es:"Â¿De dÃ³nde eres?"},{en:"How are you?",zh:"ä½ å¥½å—ï¼Ÿ",ja:"ãŠå…ƒæ°—ã§ã™ã‹ï¼Ÿ",es:"Â¿CÃ³mo estÃ¡s?"},{en:"How old are you?",zh:"ä½ å‡ å²ï¼Ÿ",ja:"ãŠã„ãã¤ï¼Ÿ",es:"Â¿CuÃ¡ntos aÃ±os tienes?"}], answer:2 },
    { text:"ã„ã„ãˆ", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"Yes",zh:"æ˜¯",ja:"ã¯ã„",es:"SÃ­"},{en:"No",zh:"ä¸æ˜¯",ja:"ã„ã„ãˆ",es:"No"},{en:"Maybe",zh:"ä¹Ÿè®¸",ja:"ãŸã¶ã‚“",es:"QuizÃ¡s"},{en:"OK",zh:"å¥½çš„",ja:"OK",es:"OK"}], answer:1 },
  ]
},
intermediate: {
  writing: [
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"è¶£å‘³ã¯ä½•ã§ã™ã‹ï¼Ÿ",
      choices:[{en:"How old are you?",zh:"ä½ å‡ å²ï¼Ÿ",ja:"ãŠã„ãã¤ã§ã™ã‹ï¼Ÿ",es:"Â¿CuÃ¡ntos aÃ±os tienes?"},{en:"What is your hobby?",zh:"ä½ çš„çˆ±å¥½æ˜¯ä»€ä¹ˆï¼Ÿ",ja:"è¶£å‘³ã¯ä½•ã§ã™ã‹ï¼Ÿ",es:"Â¿CuÃ¡l es tu hobby?"},{en:"Where do you live?",zh:"ä½ ä½åœ¨å“ªé‡Œï¼Ÿ",ja:"ã©ã“ã«ä½ã‚“ã§ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿DÃ³nde vives?"},{en:"What is your job?",zh:"ä½ çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ",ja:"ãŠä»•äº‹ã¯ï¼Ÿ",es:"Â¿CuÃ¡l es tu trabajo?"}], answer:1 },
    { q:{en:"Choose the correct kanji for 'mountain'",zh:"é€‰æ‹©'å±±'çš„æ­£ç¡®æ±‰å­—",ja:"'å±±'ã®æ­£ã—ã„æ¼¢å­—ã¯ï¼Ÿ",es:"Elige el kanji correcto para 'montaÃ±a'"}, jp:"ã‚„ã¾ = ?",
      choices:[{en:"å· (river)",zh:"å·ï¼ˆæ²³ï¼‰",ja:"å·",es:"å· (rÃ­o)"},{en:"å±± (mountain)",zh:"å±±ï¼ˆå±±ï¼‰",ja:"å±±",es:"å±± (montaÃ±a)"},{en:"ç”° (rice field)",zh:"ç”°ï¼ˆç”°ï¼‰",ja:"ç”°",es:"ç”° (arrozal)"},{en:"æ£® (forest)",zh:"æ£®ï¼ˆæ£®æ—ï¼‰",ja:"æ£®",es:"æ£® (bosque)"}], answer:1 },
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"é§…ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
      choices:[{en:"Where is the school?",zh:"å­¦æ ¡åœ¨å“ªé‡Œï¼Ÿ",ja:"å­¦æ ¡ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ la escuela?"},{en:"Where is the hospital?",zh:"åŒ»é™¢åœ¨å“ªé‡Œï¼Ÿ",ja:"ç—…é™¢ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ el hospital?"},{en:"Where is the station?",zh:"è½¦ç«™åœ¨å“ªé‡Œï¼Ÿ",ja:"é§…ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ la estaciÃ³n?"},{en:"Where is the hotel?",zh:"é…’åº—åœ¨å“ªé‡Œï¼Ÿ",ja:"ãƒ›ãƒ†ãƒ«ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ el hotel?"}], answer:2 },
    { q:{en:"Choose the correct particle:",zh:"é€‰æ‹©æ­£ç¡®çš„åŠ©è¯ï¼š",ja:"æ­£ã—ã„åŠ©è©ã¯ï¼Ÿ",es:"Elige la partÃ­cula correcta:"}, jp:"æ±äº¬ï¼¿è¡Œãã¾ã™",
      choices:[{en:"ã‚’",zh:"ã‚’",ja:"ã‚’",es:"ã‚’"},{en:"ã«",zh:"ã«",ja:"ã«",es:"ã«"},{en:"ã¯",zh:"ã¯",ja:"ã¯",es:"ã¯"},{en:"ã§",zh:"ã§",ja:"ã§",es:"ã§"}], answer:1 },
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"ãŠè…¹ãŒç©ºãã¾ã—ãŸ",
      choices:[{en:"I'm tired",zh:"æˆ‘ç´¯äº†",ja:"ç–²ã‚ŒãŸ",es:"Estoy cansado"},{en:"I'm hungry",zh:"æˆ‘é¥¿äº†",ja:"ãŠè…¹ãŒç©ºã„ãŸ",es:"Tengo hambre"},{en:"I'm thirsty",zh:"æˆ‘æ¸´äº†",ja:"å–‰ãŒæ¸‡ã„ãŸ",es:"Tengo sed"},{en:"I'm sleepy",zh:"æˆ‘å›°äº†",ja:"çœ ã„",es:"Tengo sueÃ±o"}], answer:1 },
    { q:{en:"Choose the correct reading of é£Ÿã¹ã‚‹",zh:"é€‰æ‹© é£Ÿã¹ã‚‹ çš„æ­£ç¡®è¯»éŸ³",ja:"é£Ÿã¹ã‚‹ ã®æ­£ã—ã„èª­ã¿æ–¹ã¯ï¼Ÿ",es:"Elige la lectura correcta de é£Ÿã¹ã‚‹"}, jp:"é£Ÿã¹ã‚‹",
      choices:[{en:"noberu",zh:"noberu",ja:"ã®ã¹ã‚‹",es:"noberu"},{en:"taberu",zh:"taberu",ja:"ãŸã¹ã‚‹",es:"taberu"},{en:"kuberu",zh:"kuberu",ja:"ãã¹ã‚‹",es:"kuberu"},{en:"aberu",zh:"aberu",ja:"ã‚ã¹ã‚‹",es:"aberu"}], answer:1 },
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"å¤©æ°—ãŒã„ã„ã§ã™ã­",
      choices:[{en:"It's cold today",zh:"ä»Šå¤©å¾ˆå†·",ja:"ä»Šæ—¥ã¯å¯’ã„",es:"Hace frÃ­o hoy"},{en:"The food is good",zh:"é¥­å¾ˆå¥½åƒ",ja:"æ–™ç†ãŒãŠã„ã—ã„",es:"La comida es buena"},{en:"The weather is nice",zh:"å¤©æ°”å¾ˆå¥½",ja:"å¤©æ°—ãŒã„ã„",es:"El clima es agradable"},{en:"It's getting late",zh:"å¾ˆæ™šäº†",ja:"é…ããªã£ãŸ",es:"Se hace tarde"}], answer:2 },
    { q:{en:"Choose the correct counter for people:",zh:"é€‰æ‹©æ­£ç¡®çš„äººæ•°é‡è¯ï¼š",ja:"äººã®æ­£ã—ã„æ•°ãˆæ–¹ã¯ï¼Ÿ",es:"Elige el contador correcto para personas:"}, jp:"3___",
      choices:[{en:"ä¸‰ã¤ (general)",zh:"ä¸‰ã¤ï¼ˆé€šç”¨ï¼‰",ja:"ä¸‰ã¤",es:"ä¸‰ã¤ (general)"},{en:"ä¸‰äºº (people)",zh:"ä¸‰äººï¼ˆäººï¼‰",ja:"ä¸‰äºº",es:"ä¸‰äºº (personas)"},{en:"ä¸‰æœ¬ (long objects)",zh:"ä¸‰æœ¬ï¼ˆé•¿æ¡ç‰©ï¼‰",ja:"ä¸‰æœ¬",es:"ä¸‰æœ¬ (objetos largos)"},{en:"ä¸‰æš (flat objects)",zh:"ä¸‰æšï¼ˆæ‰å¹³ç‰©ï¼‰",ja:"ä¸‰æš",es:"ä¸‰æš (objetos planos)"}], answer:1 },
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™",
      choices:[{en:"I speak Japanese",zh:"æˆ‘ä¼šè¯´æ—¥è¯­",ja:"æ—¥æœ¬èªã‚’è©±ã›ã¾ã™",es:"Hablo japonÃ©s"},{en:"I am studying Japanese",zh:"æˆ‘æ­£åœ¨å­¦æ—¥è¯­",ja:"æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™",es:"Estoy estudiando japonÃ©s"},{en:"I like Japanese",zh:"æˆ‘å–œæ¬¢æ—¥è¯­",ja:"æ—¥æœ¬èªãŒå¥½ã",es:"Me gusta el japonÃ©s"},{en:"I teach Japanese",zh:"æˆ‘æ•™æ—¥è¯­",ja:"æ—¥æœ¬èªã‚’æ•™ãˆã¦ã„ã‚‹",es:"EnseÃ±o japonÃ©s"}], answer:1 },
    { q:{en:"What is the past tense of è¡Œã (iku)?",zh:"è¡Œã (iku) çš„è¿‡å»å¼æ˜¯ä»€ä¹ˆï¼Ÿ",ja:"è¡Œã ã®éå»å½¢ã¯ï¼Ÿ",es:"Â¿CuÃ¡l es el pasado de è¡Œã (iku)?"}, jp:"è¡Œã â†’ ?",
      choices:[{en:"è¡Œã£ãŸ (itta)",zh:"è¡Œã£ãŸ (itta)",ja:"è¡Œã£ãŸ",es:"è¡Œã£ãŸ (itta)"},{en:"è¡Œã£ã¦ (itte)",zh:"è¡Œã£ã¦ (itte)",ja:"è¡Œã£ã¦",es:"è¡Œã£ã¦ (itte)"},{en:"è¡Œã‹ãªã„ (ikanai)",zh:"è¡Œã‹ãªã„ (ikanai)",ja:"è¡Œã‹ãªã„",es:"è¡Œã‹ãªã„ (ikanai)"},{en:"è¡Œãã¾ã™ (ikimasu)",zh:"è¡Œãã¾ã™ (ikimasu)",ja:"è¡Œãã¾ã™",es:"è¡Œãã¾ã™ (ikimasu)"}], answer:0 },
  ],
  listening: [
    { text:"ã™ã¿ã¾ã›ã‚“ã€é§…ã¯ã©ã“ã§ã™ã‹", q:{en:"What is being asked?",zh:"åœ¨é—®ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã‚’èã„ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se estÃ¡ preguntando?"}, choices:[{en:"Where is the hotel?",zh:"é…’åº—åœ¨å“ªé‡Œï¼Ÿ",ja:"ãƒ›ãƒ†ãƒ«ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ el hotel?"},{en:"Where is the station?",zh:"è½¦ç«™åœ¨å“ªé‡Œï¼Ÿ",ja:"é§…ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ la estaciÃ³n?"},{en:"Where is the bathroom?",zh:"å•æ‰€åœ¨å“ªé‡Œï¼Ÿ",ja:"ãƒˆã‚¤ãƒ¬ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ el baÃ±o?"},{en:"Where is the school?",zh:"å­¦æ ¡åœ¨å“ªé‡Œï¼Ÿ",ja:"å­¦æ ¡ã¯ã©ã“ï¼Ÿ",es:"Â¿DÃ³nde estÃ¡ la escuela?"}], answer:1 },
    { text:"ã“ã‚Œã¯ã„ãã‚‰ã§ã™ã‹", q:{en:"What is being asked?",zh:"åœ¨é—®ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã‚’èã„ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se estÃ¡ preguntando?"}, choices:[{en:"What is this?",zh:"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ",ja:"ã“ã‚Œã¯ä½•ï¼Ÿ",es:"Â¿QuÃ© es esto?"},{en:"How much is this?",zh:"è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ",ja:"ã“ã‚Œã¯ã„ãã‚‰ï¼Ÿ",es:"Â¿CuÃ¡nto cuesta esto?"},{en:"Whose is this?",zh:"è¿™æ˜¯è°çš„ï¼Ÿ",ja:"ã“ã‚Œã¯èª°ã®ï¼Ÿ",es:"Â¿De quiÃ©n es esto?"},{en:"Where is this from?",zh:"è¿™ä»å“ªæ¥ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã“ã‹ã‚‰ï¼Ÿ",es:"Â¿De dÃ³nde es esto?"}], answer:1 },
    { text:"ã‚ãŸã—ã¯ãŒãã›ã„ã§ã™", q:{en:"What did the speaker say?",zh:"è¯´è¯è€…è¯´äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© dijo?"}, choices:[{en:"I am a teacher",zh:"æˆ‘æ˜¯è€å¸ˆ",ja:"å…ˆç”Ÿã§ã™",es:"Soy profesor"},{en:"I am a student",zh:"æˆ‘æ˜¯å­¦ç”Ÿ",ja:"å­¦ç”Ÿã§ã™",es:"Soy estudiante"},{en:"I am a doctor",zh:"æˆ‘æ˜¯åŒ»ç”Ÿ",ja:"åŒ»è€…ã§ã™",es:"Soy doctor"},{en:"I am Japanese",zh:"æˆ‘æ˜¯æ—¥æœ¬äºº",ja:"æ—¥æœ¬äººã§ã™",es:"Soy japonÃ©s"}], answer:1 },
    { text:"ãã‚‡ã†ã¯ã‚ã¤ã„ã§ã™ã­", q:{en:"What is the speaker saying?",zh:"è¯´è¯è€…åœ¨è¯´ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© estÃ¡ diciendo?"}, choices:[{en:"It's cold today",zh:"ä»Šå¤©å¾ˆå†·",ja:"ä»Šæ—¥ã¯å¯’ã„",es:"Hace frÃ­o hoy"},{en:"It's hot today",zh:"ä»Šå¤©å¾ˆçƒ­",ja:"ä»Šæ—¥ã¯æš‘ã„",es:"Hace calor hoy"},{en:"It's raining today",zh:"ä»Šå¤©ä¸‹é›¨",ja:"ä»Šæ—¥ã¯é›¨",es:"Llueve hoy"},{en:"It's windy today",zh:"ä»Šå¤©é£å¾ˆå¤§",ja:"ä»Šæ—¥ã¯é¢¨ãŒå¼·ã„",es:"Hace viento hoy"}], answer:1 },
    { text:"ã«ã»ã‚“ã”ãŒã™ã“ã—ã‚ã‹ã‚Šã¾ã™", q:{en:"What did you hear?",zh:"ä½ å¬åˆ°äº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã„ã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© escuchaste?"}, choices:[{en:"I don't understand Japanese",zh:"æˆ‘ä¸æ‡‚æ—¥è¯­",ja:"æ—¥æœ¬èªãŒåˆ†ã‹ã‚‰ãªã„",es:"No entiendo japonÃ©s"},{en:"I speak Japanese fluently",zh:"æˆ‘æ—¥è¯­è¯´å¾—å¾ˆæµåˆ©",ja:"æ—¥æœ¬èªãŒãƒšãƒ©ãƒšãƒ©",es:"Hablo japonÃ©s con fluidez"},{en:"I understand a little Japanese",zh:"æˆ‘æ‡‚ä¸€ç‚¹æ—¥è¯­",ja:"æ—¥æœ¬èªãŒå°‘ã—åˆ†ã‹ã‚‹",es:"Entiendo un poco de japonÃ©s"},{en:"I'm learning Japanese",zh:"æˆ‘åœ¨å­¦æ—¥è¯­",ja:"æ—¥æœ¬èªã‚’å‹‰å¼·ä¸­",es:"Estoy aprendiendo japonÃ©s"}], answer:2 },
    { text:"ã—ã‚…ãã ã„ã‚’ã‚ã™ã‚Œã¾ã—ãŸ", q:{en:"What happened?",zh:"å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ãŒã‚ã‚Šã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© pasÃ³?"}, choices:[{en:"I did my homework",zh:"æˆ‘åšäº†ä½œä¸š",ja:"å®¿é¡Œã‚’ã‚„ã£ãŸ",es:"Hice la tarea"},{en:"I forgot my homework",zh:"æˆ‘å¿˜äº†ä½œä¸š",ja:"å®¿é¡Œã‚’å¿˜ã‚ŒãŸ",es:"OlvidÃ© mi tarea"},{en:"I lost my homework",zh:"æˆ‘å¼„ä¸¢äº†ä½œä¸š",ja:"å®¿é¡Œã‚’ãªãã—ãŸ",es:"PerdÃ­ mi tarea"},{en:"I finished my homework",zh:"æˆ‘åšå®Œäº†ä½œä¸š",ja:"å®¿é¡Œã‚’çµ‚ãˆãŸ",es:"TerminÃ© mi tarea"}], answer:1 },
    { text:"ã‚‰ã„ã­ã‚“ã«ã»ã‚“ã«ã„ããŸã„ã§ã™", q:{en:"What does the speaker want?",zh:"è¯´è¯è€…æƒ³åšä»€ä¹ˆï¼Ÿ",ja:"ä½•ãŒã—ãŸã„ã§ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© quiere el hablante?"}, choices:[{en:"Go to China next year",zh:"æ˜å¹´å»ä¸­å›½",ja:"æ¥å¹´ä¸­å›½ã«è¡ŒããŸã„",es:"Ir a China el prÃ³ximo aÃ±o"},{en:"Go to Japan next year",zh:"æ˜å¹´å»æ—¥æœ¬",ja:"æ¥å¹´æ—¥æœ¬ã«è¡ŒããŸã„",es:"Ir a JapÃ³n el prÃ³ximo aÃ±o"},{en:"Come back next year",zh:"æ˜å¹´å›æ¥",ja:"æ¥å¹´æˆ»ã‚ŠãŸã„",es:"Volver el prÃ³ximo aÃ±o"},{en:"Study abroad next year",zh:"æ˜å¹´ç•™å­¦",ja:"æ¥å¹´ç•™å­¦ã—ãŸã„",es:"Estudiar en el extranjero"}], answer:1 },
    { text:"ã“ã“ã«ã™ã‚ã£ã¦ã‚‚ã„ã„ã§ã™ã‹", q:{en:"What is being asked?",zh:"åœ¨é—®ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã‚’èã„ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se pregunta?"}, choices:[{en:"Can I eat here?",zh:"å¯ä»¥åœ¨è¿™åƒå—ï¼Ÿ",ja:"ã“ã“ã§é£Ÿã¹ã¦ã‚‚ã„ã„ï¼Ÿ",es:"Â¿Puedo comer aquÃ­?"},{en:"Can I sit here?",zh:"å¯ä»¥åè¿™é‡Œå—ï¼Ÿ",ja:"ã“ã“ã«åº§ã£ã¦ã‚‚ã„ã„ï¼Ÿ",es:"Â¿Puedo sentarme aquÃ­?"},{en:"Can I wait here?",zh:"å¯ä»¥åœ¨è¿™ç­‰å—ï¼Ÿ",ja:"ã“ã“ã§å¾…ã£ã¦ã‚‚ã„ã„ï¼Ÿ",es:"Â¿Puedo esperar aquÃ­?"},{en:"Can I park here?",zh:"å¯ä»¥åœè¿™é‡Œå—ï¼Ÿ",ja:"ã“ã“ã«åœã‚ã¦ã‚‚ã„ã„ï¼Ÿ",es:"Â¿Puedo estacionar aquÃ­?"}], answer:1 },
    { text:"ãŠã‹ã‚ã•ã‚“ã¯ã‚Šã‚‡ã†ã‚ŠãŒã˜ã‚‡ã†ãšã§ã™", q:{en:"What is being said?",zh:"åœ¨è¯´ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se dice?"}, choices:[{en:"My mother likes cooking",zh:"å¦ˆå¦ˆå–œæ¬¢åšé¥­",ja:"æ¯ã¯æ–™ç†ãŒå¥½ã",es:"A mi madre le gusta cocinar"},{en:"My mother is good at cooking",zh:"å¦ˆå¦ˆåšé¥­å¾ˆå¥½",ja:"æ¯ã¯æ–™ç†ãŒä¸Šæ‰‹",es:"Mi madre cocina bien"},{en:"My mother is a chef",zh:"å¦ˆå¦ˆæ˜¯å¨å¸ˆ",ja:"æ¯ã¯ã‚·ã‚§ãƒ•",es:"Mi madre es chef"},{en:"My mother is busy cooking",zh:"å¦ˆå¦ˆå¿™ç€åšé¥­",ja:"æ¯ã¯æ–™ç†ã§å¿™ã—ã„",es:"Mi madre estÃ¡ ocupada cocinando"}], answer:1 },
    { text:"ã§ã‚“ã—ã‚ƒãŒãŠãã‚Œã¦ã„ã¾ã™", q:{en:"What is happening?",zh:"å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ãŒèµ·ãã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© estÃ¡ pasando?"}, choices:[{en:"The train is crowded",zh:"ç”µè½¦å¾ˆæ‹¥æŒ¤",ja:"é›»è»ŠãŒæ··ã‚“ã§ã„ã‚‹",es:"El tren estÃ¡ lleno"},{en:"The train is delayed",zh:"ç”µè½¦æ™šç‚¹äº†",ja:"é›»è»ŠãŒé…ã‚Œã¦ã„ã‚‹",es:"El tren estÃ¡ retrasado"},{en:"The train has arrived",zh:"ç”µè½¦åˆ°äº†",ja:"é›»è»ŠãŒåˆ°ç€ã—ãŸ",es:"El tren ha llegado"},{en:"The train is fast",zh:"ç”µè½¦å¾ˆå¿«",ja:"é›»è»ŠãŒé€Ÿã„",es:"El tren es rÃ¡pido"}], answer:1 },
  ]
},
advanced: {
  writing: [
    { q:{en:"What does this proverb mean?",zh:"è¿™ä¸ªè°šè¯­æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã®ã“ã¨ã‚ã–ã®æ„å‘³ã¯ï¼Ÿ",es:"Â¿QuÃ© significa este proverbio?"}, jp:"çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´",
      choices:[{en:"Patience pays off",zh:"åšæŒå°±æ˜¯èƒœåˆ©",ja:"è¾›æŠ±ã™ã‚Œã°å ±ã‚ã‚Œã‚‹",es:"La paciencia da frutos"},{en:"Time flies",zh:"å…‰é˜´ä¼¼ç®­",ja:"å…‰é™°çŸ¢ã®å¦‚ã—",es:"El tiempo vuela"},{en:"Strike while hot",zh:"è¶çƒ­æ‰“é“",ja:"é‰„ã¯ç†±ã„ã†ã¡ã«æ‰“ã¦",es:"Al hierro caliente, batir de repente"},{en:"Easy come, easy go",zh:"æ¥å¾—å®¹æ˜“å»å¾—å¿«",ja:"æ‚ªéŠ­èº«ã«ä»˜ã‹ãš",es:"Lo que fÃ¡cil viene, fÃ¡cil se va"}], answer:0 },
    { q:{en:"Choose the correct keigo (honorific) for 'to eat':",zh:"é€‰æ‹©'åƒ'çš„æ­£ç¡®æ•¬è¯­ï¼š",ja:"'é£Ÿã¹ã‚‹'ã®æ­£ã—ã„å°Šæ•¬èªã¯ï¼Ÿ",es:"Elige el keigo correcto para 'comer':"}, jp:"é£Ÿã¹ã‚‹ â†’ honorific?",
      choices:[{en:"é£Ÿã† (casual)",zh:"é£Ÿã†ï¼ˆéšæ„ï¼‰",ja:"é£Ÿã†",es:"é£Ÿã† (casual)"},{en:"é£Ÿã¹ã‚‹ (neutral)",zh:"é£Ÿã¹ã‚‹ï¼ˆæ™®é€šï¼‰",ja:"é£Ÿã¹ã‚‹",es:"é£Ÿã¹ã‚‹ (neutral)"},{en:"å¬ã—ä¸ŠãŒã‚‹ (honorific)",zh:"å¬ã—ä¸ŠãŒã‚‹ï¼ˆå°Šæ•¬è¯­ï¼‰",ja:"å¬ã—ä¸ŠãŒã‚‹",es:"å¬ã—ä¸ŠãŒã‚‹ (honorÃ­fico)"},{en:"ã„ãŸã ã (humble)",zh:"ã„ãŸã ãï¼ˆè°¦è®©è¯­ï¼‰",ja:"ã„ãŸã ã",es:"ã„ãŸã ã (humilde)"}], answer:2 },
    { q:{en:"What does this mean?",zh:"è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ã“ã‚Œã¯ã©ã†ã„ã†æ„å‘³ï¼Ÿ",es:"Â¿QuÃ© significa esto?"}, jp:"å½¼ã¯ç´„æŸã‚’ç ´ã£ãŸ",
      choices:[{en:"He made a promise",zh:"ä»–è®¸äº†ä¸€ä¸ªæ‰¿è¯º",ja:"ç´„æŸã—ãŸ",es:"Hizo una promesa"},{en:"He kept his promise",zh:"ä»–éµå®ˆäº†æ‰¿è¯º",ja:"ç´„æŸã‚’å®ˆã£ãŸ",es:"CumpliÃ³ su promesa"},{en:"He broke his promise",zh:"ä»–è¿èƒŒäº†æ‰¿è¯º",ja:"ç´„æŸã‚’ç ´ã£ãŸ",es:"RompiÃ³ su promesa"},{en:"He forgot his promise",zh:"ä»–å¿˜è®°äº†æ‰¿è¯º",ja:"ç´„æŸã‚’å¿˜ã‚ŒãŸ",es:"OlvidÃ³ su promesa"}], answer:2 },
    { q:{en:"Choose the correct grammar:",zh:"é€‰æ‹©æ­£ç¡®çš„è¯­æ³•ï¼š",ja:"æ­£ã—ã„æ–‡æ³•ã¯ï¼Ÿ",es:"Elige la gramÃ¡tica correcta:"}, jp:"é›¨ãŒé™ã‚‹___ã€è©¦åˆã¯ä¸­æ­¢ã§ã™",
      choices:[{en:"ã®ã§ (because)",zh:"ã®ã§ï¼ˆå› ä¸ºï¼‰",ja:"ã®ã§",es:"ã®ã§ (porque)"},{en:"ãªã‚‰ (if)",zh:"ãªã‚‰ï¼ˆå¦‚æœï¼‰",ja:"ãªã‚‰",es:"ãªã‚‰ (si)"},{en:"ã®ã« (despite)",zh:"ã®ã«ï¼ˆå°½ç®¡ï¼‰",ja:"ã®ã«",es:"ã®ã« (a pesar de)"},{en:"ã‘ã© (but)",zh:"ã‘ã©ï¼ˆä½†æ˜¯ï¼‰",ja:"ã‘ã©",es:"ã‘ã© (pero)"}], answer:1 },
    { q:{en:"What does è…¹å…«åˆ†ç›® mean?",zh:"è…¹å…«åˆ†ç›® æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"è…¹å…«åˆ†ç›® ã®æ„å‘³ã¯ï¼Ÿ",es:"Â¿QuÃ© significa è…¹å…«åˆ†ç›®?"}, jp:"è…¹å…«åˆ†ç›®",
      choices:[{en:"Eat heartily",zh:"å¤§å¿«æœµé¢",ja:"ãŸãã•ã‚“é£Ÿã¹ã‚‹",es:"Comer abundantemente"},{en:"Eat until 80% full",zh:"åƒåˆ°å…«åˆ†é¥±",ja:"è…¹å…«åˆ†ç›®",es:"Comer hasta el 80%"},{en:"Skip meals",zh:"ä¸åƒé¥­",ja:"é£Ÿäº‹ã‚’æŠœã",es:"Saltarse comidas"},{en:"Eat three meals a day",zh:"ä¸€æ—¥ä¸‰é¤",ja:"ä¸€æ—¥ä¸‰é£Ÿ",es:"Tres comidas al dÃ­a"}], answer:1 },
    { q:{en:"What is the humble form of è¨€ã† (iu)?",zh:"è¨€ã† (iu) çš„è°¦è®©è¯­æ˜¯ä»€ä¹ˆï¼Ÿ",ja:"è¨€ã† ã®è¬™è­²èªã¯ï¼Ÿ",es:"Â¿CuÃ¡l es la forma humilde de è¨€ã†?"}, jp:"è¨€ã† â†’ humble?",
      choices:[{en:"ãŠã£ã—ã‚ƒã‚‹ (honorific)",zh:"ãŠã£ã—ã‚ƒã‚‹ï¼ˆå°Šæ•¬è¯­ï¼‰",ja:"ãŠã£ã—ã‚ƒã‚‹",es:"ãŠã£ã—ã‚ƒã‚‹ (honorÃ­fico)"},{en:"ç”³ã™ (humble)",zh:"ç”³ã™ï¼ˆè°¦è®©è¯­ï¼‰",ja:"ç”³ã™",es:"ç”³ã™ (humilde)"},{en:"è¨€ã‚ã‚Œã‚‹ (passive)",zh:"è¨€ã‚ã‚Œã‚‹ï¼ˆè¢«åŠ¨ï¼‰",ja:"è¨€ã‚ã‚Œã‚‹",es:"è¨€ã‚ã‚Œã‚‹ (pasivo)"},{en:"è¨€ã„ãŸã„ (want to say)",zh:"è¨€ã„ãŸã„ï¼ˆæƒ³è¯´ï¼‰",ja:"è¨€ã„ãŸã„",es:"è¨€ã„ãŸã„ (querer decir)"}], answer:1 },
    { q:{en:"What does ä»¥å¿ƒä¼å¿ƒ mean?",zh:"ä»¥å¿ƒä¼å¿ƒ æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ä»¥å¿ƒä¼å¿ƒ ã®æ„å‘³ã¯ï¼Ÿ",es:"Â¿QuÃ© significa ä»¥å¿ƒä¼å¿ƒ?"}, jp:"ä»¥å¿ƒä¼å¿ƒ",
      choices:[{en:"Heart to heart / Telepathy",zh:"å¿ƒæœ‰çµçŠ€ / å¿ƒçµæ„Ÿåº”",ja:"ä»¥å¿ƒä¼å¿ƒ",es:"TelepatÃ­a / De corazÃ³n a corazÃ³n"},{en:"Love at first sight",zh:"ä¸€è§é’Ÿæƒ…",ja:"ä¸€ç›®æƒšã‚Œ",es:"Amor a primera vista"},{en:"Broken heart",zh:"å¿ƒç¢",ja:"å¤±æ‹",es:"CorazÃ³n roto"},{en:"Change of heart",zh:"æ”¹å˜ä¸»æ„",ja:"å¿ƒå¤‰ã‚ã‚Š",es:"Cambio de opiniÃ³n"}], answer:0 },
    { q:{en:"Choose the correct reading:",zh:"é€‰æ‹©æ­£ç¡®çš„è¯»éŸ³ï¼š",ja:"æ­£ã—ã„èª­ã¿æ–¹ã¯ï¼Ÿ",es:"Elige la lectura correcta:"}, jp:"ä¸€æœŸä¸€ä¼š",
      choices:[{en:"ikki ikkai",zh:"ikki ikkai",ja:"ã„ã£ãã„ã£ã‹ã„",es:"ikki ikkai"},{en:"ichigo ichie",zh:"ichigo ichie",ja:"ã„ã¡ã”ã„ã¡ãˆ",es:"ichigo ichie"},{en:"ikki ichie",zh:"ikki ichie",ja:"ã„ã£ãã„ã¡ãˆ",es:"ikki ichie"},{en:"ichigo ikkai",zh:"ichigo ikkai",ja:"ã„ã¡ã”ã„ã£ã‹ã„",es:"ichigo ikkai"}], answer:1 },
    { q:{en:"What nuance does ï½ã¦ã—ã¾ã† add?",zh:"ï½ã¦ã—ã¾ã† æ·»åŠ äº†ä»€ä¹ˆè¯­æ°”ï¼Ÿ",ja:"ï½ã¦ã—ã¾ã† ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã¯ï¼Ÿ",es:"Â¿QuÃ© matiz aÃ±ade ï½ã¦ã—ã¾ã†?"}, jp:"é£Ÿã¹ã¦ã—ã¾ã£ãŸ",
      choices:[{en:"Wanted to eat",zh:"æƒ³åƒ",ja:"é£Ÿã¹ãŸã‹ã£ãŸ",es:"QuerÃ­a comer"},{en:"Ended up eating (regret/completion)",zh:"ä¸å°å¿ƒåƒäº†ï¼ˆé—æ†¾/å®Œæˆï¼‰",ja:"é£Ÿã¹ã¦ã—ã¾ã£ãŸï¼ˆå¾Œæ‚”/å®Œäº†ï¼‰",es:"TerminÃ© comiendo (arrepentimiento)"},{en:"Started eating",zh:"å¼€å§‹åƒäº†",ja:"é£Ÿã¹å§‹ã‚ãŸ",es:"EmpecÃ© a comer"},{en:"Continued eating",zh:"ç»§ç»­åƒ",ja:"é£Ÿã¹ç¶šã‘ãŸ",es:"SeguÃ­ comiendo"}], answer:1 },
    { q:{en:"What does ä¸ƒè»¢ã³å…«èµ·ã mean?",zh:"ä¸ƒè»¢ã³å…«èµ·ã æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",ja:"ä¸ƒè»¢ã³å…«èµ·ã ã®æ„å‘³ã¯ï¼Ÿ",es:"Â¿QuÃ© significa ä¸ƒè»¢ã³å…«èµ·ã?"}, jp:"ä¸ƒè»¢ã³å…«èµ·ã",
      choices:[{en:"Lucky seven",zh:"å¹¸è¿ä¸ƒ",ja:"ãƒ©ãƒƒã‚­ãƒ¼ã‚»ãƒ–ãƒ³",es:"Siete de la suerte"},{en:"Fall 7 times, get up 8",zh:"ä¸ƒæ¬¡è·Œå€’å…«æ¬¡çˆ¬èµ·",ja:"ä¸ƒè»¢ã³å…«èµ·ã",es:"Caer 7 veces, levantarse 8"},{en:"Seven wonders",zh:"ä¸ƒå¤§å¥‡è¿¹",ja:"ä¸ƒä¸æ€è­°",es:"Siete maravillas"},{en:"Week by week",zh:"ä¸€å‘¨ä¸€å‘¨åœ°",ja:"ä¸€é€±é–“ãšã¤",es:"Semana a semana"}], answer:1 },
  ],
  listening: [
    { text:"ã›ã£ã‹ãã®ä¼‘ã¿ãªã®ã«ã€é›¨ãŒé™ã£ã¦ã—ã¾ã„ã¾ã—ãŸ", q:{en:"What is the speaker feeling?",zh:"è¯´è¯è€…æ„Ÿè§‰å¦‚ä½•ï¼Ÿ",ja:"è©±è€…ã®æ°—æŒã¡ã¯ï¼Ÿ",es:"Â¿CÃ³mo se siente el hablante?"}, choices:[{en:"Happy about the rain",zh:"å¯¹ä¸‹é›¨å¾ˆé«˜å…´",ja:"é›¨ãŒå¬‰ã—ã„",es:"Contento por la lluvia"},{en:"Disappointed â€” holiday ruined by rain",zh:"å¤±æœ›â€”â€”å‡æœŸè¢«é›¨æ¯äº†",ja:"æ®‹å¿µâ€”â€”ä¼‘ã¿ãŒé›¨ã§å°ç„¡ã—",es:"Decepcionado â€” vacaciones arruinadas"},{en:"Excited to stay home",zh:"å¾ˆæœŸå¾…å¾…åœ¨å®¶é‡Œ",ja:"å®¶ã«ã„ã‚‹ã®ãŒæ¥½ã—ã¿",es:"Emocionado de quedarse en casa"},{en:"Relieved it's raining",zh:"é›¨è®©äººå®‰å¿ƒ",ja:"é›¨ã§å®‰å¿ƒ",es:"Aliviado por la lluvia"}], answer:1 },
    { text:"ã“ã®æ˜ ç”»ã¯è¦‹ã‚Œã°è¦‹ã‚‹ã»ã©é¢ç™½ããªã‚Šã¾ã™", q:{en:"What is said about the movie?",zh:"å…³äºç”µå½±è¯´äº†ä»€ä¹ˆï¼Ÿ",ja:"æ˜ ç”»ã«ã¤ã„ã¦ä½•ã¨è¨€ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se dice de la pelÃ­cula?"}, choices:[{en:"The movie is boring",zh:"ç”µå½±å¾ˆæ— èŠ",ja:"æ˜ ç”»ã¯ã¤ã¾ã‚‰ãªã„",es:"La pelÃ­cula es aburrida"},{en:"It gets more interesting each time",zh:"è¶Šçœ‹è¶Šæœ‰è¶£",ja:"è¦‹ã‚Œã°è¦‹ã‚‹ã»ã©é¢ç™½ããªã‚‹",es:"Se pone mÃ¡s interesante cada vez"},{en:"The movie is too long",zh:"ç”µå½±å¤ªé•¿äº†",ja:"æ˜ ç”»ãŒé•·ã™ãã‚‹",es:"La pelÃ­cula es muy larga"},{en:"The movie is confusing",zh:"ç”µå½±å¾ˆéš¾æ‡‚",ja:"æ˜ ç”»ã¯åˆ†ã‹ã‚Šã«ãã„",es:"La pelÃ­cula es confusa"}], answer:1 },
    { text:"ã‚‚ã†ã™ã“ã—ã¯ã‚„ããŠãã‚Œã°ã‚ˆã‹ã£ãŸ", q:{en:"What does the speaker regret?",zh:"è¯´è¯è€…åæ‚”ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã‚’å¾Œæ‚”ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© lamenta el hablante?"}, choices:[{en:"Sleeping too little",zh:"ç¡å¾—å¤ªå°‘",ja:"ç¡çœ ä¸è¶³",es:"Dormir poco"},{en:"Not waking up earlier",zh:"æ²¡æœ‰æ—©ç‚¹èµ·åºŠ",ja:"ã‚‚ã£ã¨æ—©ãèµ·ãã‚Œã°ã‚ˆã‹ã£ãŸ",es:"No haberse despertado antes"},{en:"Going to bed late",zh:"ç¡å¾—å¤ªæ™š",ja:"é…ãå¯ãŸ",es:"Acostarse tarde"},{en:"Missing breakfast",zh:"é”™è¿‡äº†æ—©é¤",ja:"æœé£Ÿã‚’é€ƒã—ãŸ",es:"Perderse el desayuno"}], answer:1 },
    { text:"ã«ã»ã‚“ã®ã¶ã‚“ã‹ã«ãã‚‡ã†ã¿ã‚’ã‚‚ã¤ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ", q:{en:"What happened?",zh:"å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ",ja:"ä½•ãŒã‚ã‚Šã¾ã—ãŸã‹ï¼Ÿ",es:"Â¿QuÃ© pasÃ³?"}, choices:[{en:"Lost interest in Japanese culture",zh:"å¯¹æ—¥æœ¬æ–‡åŒ–å¤±å»äº†å…´è¶£",ja:"æ—¥æœ¬æ–‡åŒ–ã«èˆˆå‘³ã‚’å¤±ã£ãŸ",es:"PerdiÃ³ interÃ©s en la cultura japonesa"},{en:"Became interested in Japanese culture",zh:"å¯¹æ—¥æœ¬æ–‡åŒ–äº§ç”Ÿäº†å…´è¶£",ja:"æ—¥æœ¬æ–‡åŒ–ã«èˆˆå‘³ã‚’æŒã¤ã‚ˆã†ã«ãªã£ãŸ",es:"Se interesÃ³ por la cultura japonesa"},{en:"Studied Japanese culture",zh:"å­¦ä¹ äº†æ—¥æœ¬æ–‡åŒ–",ja:"æ—¥æœ¬æ–‡åŒ–ã‚’å‹‰å¼·ã—ãŸ",es:"EstudiÃ³ cultura japonesa"},{en:"Forgot about Japanese culture",zh:"å¿˜è®°äº†æ—¥æœ¬æ–‡åŒ–",ja:"æ—¥æœ¬æ–‡åŒ–ã‚’å¿˜ã‚ŒãŸ",es:"OlvidÃ³ la cultura japonesa"}], answer:1 },
    { text:"ã‹ã‚Œã¯ã¾ã‚‹ã§ã«ã»ã‚“ã˜ã‚“ã®ã‚ˆã†ã«ã«ã»ã‚“ã”ã‚’ã¯ãªã—ã¾ã™", q:{en:"What is being said?",zh:"åœ¨è¯´ä»€ä¹ˆï¼Ÿ",ja:"ä½•ã¨è¨€ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿QuÃ© se dice?"}, choices:[{en:"He is Japanese",zh:"ä»–æ˜¯æ—¥æœ¬äºº",ja:"å½¼ã¯æ—¥æœ¬äºº",es:"Ã‰l es japonÃ©s"},{en:"He speaks Japanese like a native",zh:"ä»–è¯´æ—¥è¯­åƒæ—¥æœ¬äººä¸€æ ·",ja:"ã¾ã‚‹ã§æ—¥æœ¬äººã®ã‚ˆã†ã«æ—¥æœ¬èªã‚’è©±ã™",es:"Habla japonÃ©s como un nativo"},{en:"He can't speak Japanese",zh:"ä»–ä¸ä¼šè¯´æ—¥è¯­",ja:"æ—¥æœ¬èªãŒè©±ã›ãªã„",es:"No puede hablar japonÃ©s"},{en:"He is studying Japanese",zh:"ä»–åœ¨å­¦æ—¥è¯­",ja:"æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¦ã„ã‚‹",es:"EstÃ¡ estudiando japonÃ©s"}], answer:1 },
    { text:"ã‚ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã¯ãŠã„ã—ã„ã ã‘ã§ãªãã€ã‚„ã™ã„ã§ã™", q:{en:"What is said about the restaurant?",zh:"å…³äºé¤å…è¯´äº†ä»€ä¹ˆï¼Ÿ",ja:"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã«ã¤ã„ã¦ä½•ã¨ï¼Ÿ",es:"Â¿QuÃ© se dice del restaurante?"}, choices:[{en:"Expensive but good",zh:"è´µä½†å¥½åƒ",ja:"é«˜ã„ã‘ã©ãŠã„ã—ã„",es:"Caro pero bueno"},{en:"Cheap but not good",zh:"ä¾¿å®œä½†ä¸å¥½åƒ",ja:"å®‰ã„ã‘ã©ãŠã„ã—ããªã„",es:"Barato pero no bueno"},{en:"Not only delicious but also cheap",zh:"ä¸ä»…å¥½åƒè€Œä¸”ä¾¿å®œ",ja:"ãŠã„ã—ã„ã ã‘ã§ãªãå®‰ã„",es:"No solo delicioso sino tambiÃ©n barato"},{en:"The best restaurant",zh:"æœ€å¥½çš„é¤å…",ja:"æœ€é«˜ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³",es:"El mejor restaurante"}], answer:2 },
    { text:"ã•ãã‚‰ãŒã•ãã“ã‚ã«ã¾ãŸã«ã»ã‚“ã«ã„ããŸã„ã§ã™", q:{en:"When does the speaker want to visit?",zh:"è¯´è¯è€…æƒ³ä»€ä¹ˆæ—¶å€™å»ï¼Ÿ",ja:"ã„ã¤è¡ŒããŸã„ã§ã™ã‹ï¼Ÿ",es:"Â¿CuÃ¡ndo quiere visitar?"}, choices:[{en:"During summer",zh:"å¤å¤©",ja:"å¤ã«",es:"En verano"},{en:"During cherry blossom season",zh:"æ¨±èŠ±å­£",ja:"æ¡œã®å­£ç¯€ã«",es:"En temporada de cerezos"},{en:"During new year",zh:"æ–°å¹´",ja:"ãŠæ­£æœˆã«",es:"En aÃ±o nuevo"},{en:"During autumn",zh:"ç§‹å¤©",ja:"ç§‹ã«",es:"En otoÃ±o"}], answer:1 },
    { text:"ã˜ã—ã‚“ã«ããªãˆã¦ã€ã²ã˜ã‚‡ã†ã‚‚ã¡ã ã—ã¶ãã‚ã‚’ã˜ã‚…ã‚“ã³ã—ã¦ãŠã„ã¦ãã ã•ã„", q:{en:"What should you prepare for?",zh:"åº”è¯¥ä¸ºä»€ä¹ˆåšå‡†å¤‡ï¼Ÿ",ja:"ä½•ã«å‚™ãˆã¾ã™ã‹ï¼Ÿ",es:"Â¿Para quÃ© debes prepararte?"}, choices:[{en:"A trip",zh:"æ—…è¡Œ",ja:"æ—…è¡Œ",es:"Un viaje"},{en:"A party",zh:"èšä¼š",ja:"ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼",es:"Una fiesta"},{en:"An earthquake",zh:"åœ°éœ‡",ja:"åœ°éœ‡",es:"Un terremoto"},{en:"A storm",zh:"æš´é£é›¨",ja:"åµ",es:"Una tormenta"}], answer:2 },
    { text:"ã“ã®ã—ã”ã¨ã¯ãŸã„ã¸ã‚“ã§ã™ãŒã€ã‚„ã‚ŠãŒã„ãŒã‚ã‚Šã¾ã™", q:{en:"How does the speaker feel?",zh:"è¯´è¯è€…æ„Ÿè§‰å¦‚ä½•ï¼Ÿ",ja:"ã©ã†æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",es:"Â¿CÃ³mo se siente?"}, choices:[{en:"Easy and boring",zh:"ç®€å•åˆæ— èŠ",ja:"ç°¡å˜ã§ã¤ã¾ã‚‰ãªã„",es:"FÃ¡cil y aburrido"},{en:"Hard but rewarding",zh:"è¾›è‹¦ä½†æœ‰æˆå°±æ„Ÿ",ja:"å¤§å¤‰ã ãŒã‚„ã‚ŠãŒã„ãŒã‚ã‚‹",es:"DifÃ­cil pero gratificante"},{en:"Impossible",zh:"ä¸å¯èƒ½",ja:"ç„¡ç†",es:"Imposible"},{en:"Not worth doing",zh:"ä¸å€¼å¾—åš",ja:"ã‚„ã‚‹ä¾¡å€¤ãŒãªã„",es:"No vale la pena"}], answer:1 },
    { text:"ã«ã»ã‚“ã§ã¯ãã¤ã‚’ã¬ã„ã§ã„ãˆã«ã¯ã„ã‚‹ã®ãŒãµã¤ã†ã§ã™", q:{en:"What Japanese custom is described?",zh:"æè¿°äº†ä»€ä¹ˆæ—¥æœ¬ä¹ ä¿—ï¼Ÿ",ja:"ã©ã‚“ãªæ—¥æœ¬ã®ç¿’æ…£ï¼Ÿ",es:"Â¿QuÃ© costumbre japonesa se describe?"}, choices:[{en:"Bowing when greeting",zh:"æ‰“æ‹›å‘¼æ—¶é èº¬",ja:"æŒ¨æ‹¶ã§ãŠè¾å„€",es:"Hacer reverencia al saludar"},{en:"Taking off shoes before entering",zh:"è¿›å±‹å‰è„±é‹",ja:"å®¶ã«å…¥ã‚‹å‰ã«é´ã‚’è„±ã",es:"Quitarse los zapatos antes de entrar"},{en:"Eating with chopsticks",zh:"ç”¨ç­·å­åƒé¥­",ja:"ç®¸ã§é£Ÿã¹ã‚‹",es:"Comer con palillos"},{en:"Bathing before dinner",zh:"æ™šé¤å‰æ´—æ¾¡",ja:"å¤•é£Ÿå‰ã«å…¥æµ´",es:"BaÃ±arse antes de cenar"}], answer:1 },
  ]
}
};

// ===== State =====
let currentLang = 'en';
let selectedLevel = null;
let selectedType = null;
let currentQuestions = [];
let currentIndex = 0;
let score = 0;
let answered = false;

// ===== Language =====
function setLang(lang) {
    currentLang = lang;
    document.querySelectorAll('.lang-switch button').forEach(b => b.classList.remove('active'));
    document.getElementById('lang' + lang.charAt(0).toUpperCase() + lang.slice(1)).classList.add('active');
    updateUIText();
}

function t(key) { return UI[currentLang][key] || UI.en[key] || key; }

function updateUIText() {
    const keys = ['pageTitle','backLink','mainTitle','mainSub','levelLabel','typeLabel',
        'beginnerLabel','beginnerDesc','intermediateLabel','intermediateDesc','advancedLabel','advancedDesc',
        'writingLabel','writingDesc','listeningLabel','listeningDesc','startBtn','retryBtn','changeLevelBtn','resultsTitle'];
    keys.forEach(k => {
        const el = document.getElementById(k);
        if (el) el.textContent = t(k);
    });
}

// ===== Selection =====
function selectLevel(level) {
    selectedLevel = level;
    document.querySelectorAll('.level-card').forEach((c, i) => {
        c.classList.toggle('selected', ['beginner','intermediate','advanced'][i] === level);
    });
    updateStartBtn();
}
function selectType(type) {
    selectedType = type;
    document.querySelectorAll('.type-card').forEach((c, i) => {
        c.classList.toggle('selected', ['writing','listening'][i] === type);
    });
    updateStartBtn();
}
function updateStartBtn() {
    document.getElementById('startBtn').disabled = !(selectedLevel && selectedType);
}

// ===== Quiz =====
function startQuiz() {
    currentQuestions = shuffleArray([...Q[selectedLevel][selectedType]]).slice(0, 10);
    currentIndex = 0; score = 0;
    document.getElementById('selectionScreen').style.display = 'none';
    document.getElementById('quizScreen').style.display = 'block';
    document.getElementById('resultsScreen').style.display = 'none';
    showQuestion();
}

function showQuestion() {
    answered = false;
    const q = currentQuestions[currentIndex];
    const total = currentQuestions.length;
    document.getElementById('progressBar').style.width = ((currentIndex) / total * 100) + '%';
    document.getElementById('progressText').textContent = (currentIndex + 1) + ' / ' + total;
    document.getElementById('nextBtn').style.display = 'none';

    const qText = typeof q.q === 'string' ? q.q : (q.q[currentLang] || q.q.en);
    const area = document.getElementById('questionArea');
    let html = '<div class="question-card">';

    if (selectedType === 'listening') {
        html += '<span class="question-type-badge badge-listening">ğŸ§ ' + t('listeningLabel') + '</span>';
        html += '<p class="question-text">' + esc(qText) + '</p>';
        html += '<button class="listen-btn" onclick="speakJP(\'' + escAttr(q.text) + '\')"><span class="speaker-icon">ğŸ”Š</span> ' + t('playBtn') + '</button>';
        html += '<div class="question-hint">' + t('listenHint') + '</div>';
    } else {
        html += '<span class="question-type-badge badge-writing">âœï¸ ' + t('writingLabel') + '</span>';
        html += '<p class="question-text">' + esc(qText) + '</p>';
        html += '<p class="question-jp">' + esc(q.jp) + '</p>';
    }

    html += '<div class="choices">';
    q.choices.forEach((c, i) => {
        const label = typeof c === 'string' ? c : (c[currentLang] || c.en);
        html += '<button class="choice-btn" onclick="checkAns(' + i + ',' + q.answer + ',this)" data-idx="' + i + '">' + esc(label) + '</button>';
    });
    html += '</div><div class="feedback" id="feedback"></div></div>';
    area.innerHTML = html;

    if (selectedType === 'listening') setTimeout(() => speakJP(q.text), 500);
}

function checkAns(sel, correct, btn) {
    if (answered) return;
    answered = true;
    document.querySelectorAll('.choice-btn').forEach(b => {
        b.disabled = true;
        const idx = parseInt(b.dataset.idx);
        if (idx === correct) b.classList.add('correct');
        if (idx === sel && sel !== correct) b.classList.add('wrong');
    });
    const fb = document.getElementById('feedback');
    const q = currentQuestions[currentIndex];
    if (sel === correct) {
        score++;
        fb.className = 'feedback correct';
        fb.textContent = t('correctFeedback');
    } else {
        const correctChoice = q.choices[correct];
        const correctLabel = typeof correctChoice === 'string' ? correctChoice : (correctChoice[currentLang] || correctChoice.en);
        fb.className = 'feedback wrong';
        fb.textContent = t('wrongFeedback') + correctLabel;
    }
    const nb = document.getElementById('nextBtn');
    nb.style.display = 'inline-block';
    nb.textContent = currentIndex < currentQuestions.length - 1 ? t('nextBtn') : t('seeResults');
}

function nextQuestion() {
    currentIndex++;
    if (currentIndex >= currentQuestions.length) showResults();
    else showQuestion();
}

function showResults() {
    document.getElementById('quizScreen').style.display = 'none';
    document.getElementById('resultsScreen').style.display = 'block';
    const total = currentQuestions.length;
    const pct = Math.round((score / total) * 100);
    document.getElementById('resultsScore').textContent = pct + '%';
    document.getElementById('resultsDetail').textContent = score + ' / ' + total + t('correct');
    document.getElementById('resultsTitle').textContent = t('resultsTitle');
    document.getElementById('retryBtn').textContent = t('retryBtn');
    document.getElementById('changeLevelBtn').textContent = t('changeLevelBtn');
    let icon, msg;
    if (pct >= 90) { icon = 'ğŸ‰'; msg = t('excellent'); }
    else if (pct >= 70) { icon = 'ğŸ˜Š'; msg = t('great'); }
    else if (pct >= 50) { icon = 'ğŸ“š'; msg = t('notBad'); }
    else { icon = 'ğŸ’ª'; msg = t('keepGoing'); }
    document.getElementById('resultsIcon').textContent = icon;
    document.getElementById('resultsMessage').textContent = msg;
}

function retryQuiz() { startQuiz(); }
function backToSelect() {
    selectedLevel = null; selectedType = null;
    document.querySelectorAll('.level-card,.type-card').forEach(c => c.classList.remove('selected'));
    document.getElementById('startBtn').disabled = true;
    document.getElementById('selectionScreen').style.display = 'block';
    document.getElementById('quizScreen').style.display = 'none';
    document.getElementById('resultsScreen').style.display = 'none';
}

// ===== Speech =====
function speakJP(text) {
    if (!('speechSynthesis' in window)) { alert('Speech not supported'); return; }
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'ja-JP'; u.rate = 0.85;
    const v = speechSynthesis.getVoices().find(v => v.lang.startsWith('ja'));
    if (v) u.voice = v;
    speechSynthesis.speak(u);
}
if ('speechSynthesis' in window) speechSynthesis.onvoiceschanged = () => speechSynthesis.getVoices();

// ===== Helpers =====
function shuffleArray(a) { for (let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a; }
function esc(s) { const d=document.createElement('div'); d.textContent=s; return d.innerHTML; }
function escAttr(s) { return s.replace(/'/g,"\\'").replace(/"/g,'&quot;'); }

// Init
updateUIText();
</script>
</body>
</html>
